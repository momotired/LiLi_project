# 用户模块 API

## 概述
管理用户基本信息、用户偏好设置、用户标签等功能。

## 接口列表

### 1. 获取用户信息

**接口描述:** 获取当前用户的详细信息

**请求方式:** `GET`

**请求路径:** `/users/profile`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 根据token获取用户openid
2. 查询用户详细信息
3. 返回用户基本信息、偏好设置、标签等

---

### 2. 更新用户信息

**接口描述:** 更新用户基本信息

**请求方式:** `PUT`

**请求路径:** `/users/profile`

**是否需要认证:** 是

**请求参数:**
```json
{
  "nickname": "string, 用户昵称, 可选",
  "avatar": "string, 头像URL, 可选",
  "gender": "int, 性别(0:未知,1:男,2:女), 可选",
  "city": "string, 城市, 可选",
  "province": "string, 省份, 可选",
  "country": "string, 国家, 可选"
}
```

**业务逻辑:**
1. 验证用户身份
2. 更新用户基本信息
3. 记录更新时间

---

### 3. 获取用户偏好设置

**接口描述:** 获取用户的偏好设置

**请求方式:** `GET`

**请求路径:** `/users/preferences`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 获取用户通知设置
2. 获取用户界面偏好
3. 获取用户关注的设备类型

---

### 4. 更新用户偏好设置

**接口描述:** 更新用户偏好设置

**请求方式:** `PUT`

**请求路径:** `/users/preferences`

**是否需要认证:** 是

**请求参数:**
```json
{
  "notification_enabled": "bool, 是否开启通知, 可选",
  "price_alert_enabled": "bool, 是否开启价格预警, 可选",
  "warranty_reminder_enabled": "bool, 是否开启保修提醒, 可选",
  "theme": "string, 主题设置(light/dark), 可选",
  "language": "string, 语言设置, 可选"
}
```

**业务逻辑:**
1. 验证参数有效性
2. 更新用户偏好设置
3. 触发相关通知设置更新

---

### 5. 获取用户标签

**接口描述:** 获取用户的兴趣标签

**请求方式:** `GET`

**请求路径:** `/users/tags`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 获取用户已选择的标签
2. 返回标签详细信息

---

### 6. 更新用户标签

**接口描述:** 更新用户的兴趣标签

**请求方式:** `PUT`

**请求路径:** `/users/tags`

**是否需要认证:** 是

**请求参数:**
```json
{
  "tag_ids": "array, 标签ID数组, 必填"
}
```

**业务逻辑:**
1. 验证标签ID有效性
2. 清除用户现有标签关联
3. 建立新的标签关联关系
4. 更新用户画像

---

### 7. 获取用户统计信息

**接口描述:** 获取用户的设备统计信息

**请求方式:** `GET`

**请求路径:** `/users/statistics`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 统计用户设备总数
2. 统计各类设备数量
3. 统计设备总价值
4. 计算设备平均持有时间

---

### 8. 注销用户

**接口描述:** 注销用户账号

**请求方式:** `DELETE`

**请求路径:** `/users/account`

**是否需要认证:** 是

**请求参数:**
```json
{
  "confirm": "bool, 确认注销, 必填"
}
```

**业务逻辑:**
1. 验证用户身份
2. 删除用户所有设备数据
3. 删除用户提醒设置
4. 删除用户标签关联
5. 软删除用户账号（标记为已注销） 