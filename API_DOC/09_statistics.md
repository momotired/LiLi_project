# 统计模块 API

## 概述
提供数据可视化和统计分析功能，包括设备统计、价值分析、使用趋势等图表数据。

## 接口列表

### 1. 获取仪表板数据

**接口描述:** 获取用户仪表板的概览数据

**请求方式:** `GET`

**请求路径:** `/statistics/dashboard`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 统计设备总数
2. 统计设备总价值
3. 统计各类设备数量
4. 统计即将到期的提醒数量
5. 统计价格预警数量
6. 返回仪表板概览数据

---

### 2. 获取设备统计

**接口描述:** 获取设备相关统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/devices`

**是否需要认证:** 是

**请求参数:**
- `period`: string, 统计周期(month/quarter/year), 可选, 默认month
- `group_by`: string, 分组方式(category/brand/status/purchase_date), 可选, 默认category

**业务逻辑:**
1. 按分组方式统计设备分布
2. 统计设备数量变化趋势
3. 统计设备状态分布
4. 返回统计图表数据

---

### 3. 获取价值分析

**接口描述:** 获取设备价值分析数据

**请求方式:** `GET`

**请求路径:** `/statistics/value-analysis`

**是否需要认证:** 是

**请求参数:**
- `period`: string, 统计周期(month/quarter/year), 可选, 默认month

**业务逻辑:**
1. 统计设备总价值变化
2. 统计各类设备价值分布
3. 计算设备增值/贬值情况
4. 统计价值变化趋势
5. 返回价值分析数据

---

### 4. 获取价格趋势统计

**接口描述:** 获取价格趋势统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/price-trends`

**是否需要认证:** 是

**请求参数:**
- `period`: string, 统计周期(7d/30d/90d/180d/1y), 可选, 默认30d
- `device_ids`: array, 设备ID数组, 可选

**业务逻辑:**
1. 统计设备价格变化趋势
2. 计算平均价格变化率
3. 分析价格波动情况
4. 返回价格趋势数据

---

### 5. 获取品牌统计

**接口描述:** 获取设备品牌统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/brands`

**是否需要认证:** 是

**请求参数:**
- `category_id`: int, 分类ID, 可选

**业务逻辑:**
1. 统计各品牌设备数量
2. 统计各品牌设备价值
3. 计算品牌偏好度
4. 返回品牌统计数据

---

### 6. 获取使用年限统计

**接口描述:** 获取设备使用年限统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/device-age`

**是否需要认证:** 是

**请求参数:**
- `category_id`: int, 分类ID, 可选

**业务逻辑:**
1. 统计设备使用年限分布
2. 计算平均使用年限
3. 分析设备更换周期
4. 返回使用年限统计数据

---

### 7. 获取贬值率统计

**接口描述:** 获取设备贬值率统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/depreciation`

**是否需要认证:** 是

**请求参数:**
- `category_id`: int, 分类ID, 可选
- `period`: string, 统计周期(month/quarter/year), 可选, 默认month

**业务逻辑:**
1. 计算各设备贬值率
2. 统计贬值率分布
3. 分析贬值趋势
4. 返回贬值率统计数据

---

### 8. 获取购买支出统计

**接口描述:** 获取设备购买支出统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/spending`

**是否需要认证:** 是

**请求参数:**
- `period`: string, 统计周期(month/quarter/year), 可选, 默认year
- `group_by`: string, 分组方式(month/quarter/category/brand), 可选, 默认month

**业务逻辑:**
1. 统计购买支出变化趋势
2. 按分组方式统计支出分布
3. 计算平均支出
4. 返回支出统计数据

---

### 9. 获取设备热力图

**接口描述:** 获取设备热力图数据

**请求方式:** `GET`

**请求路径:** `/statistics/heatmap`

**是否需要认证:** 是

**请求参数:**
- `type`: string, 热力图类型(category_brand/price_age/value_depreciation), 必填

**业务逻辑:**
1. 根据类型生成热力图数据
2. 计算数据分布密度
3. 返回热力图数据

---

### 10. 获取投资收益统计

**接口描述:** 获取设备投资收益统计数据

**请求方式:** `GET`

**请求路径:** `/statistics/investment-return`

**是否需要认证:** 是

**请求参数:**
- `include_sold`: bool, 是否包含已出售设备, 可选, 默认true

**业务逻辑:**
1. 计算已出售设备的投资收益
2. 估算持有设备的潜在收益
3. 统计投资收益分布
4. 返回投资收益数据

---

### 11. 获取自定义统计

**接口描述:** 获取用户自定义统计数据

**请求方式:** `POST`

**请求路径:** `/statistics/custom`

**是否需要认证:** 是

**请求参数:**
```json
{
  "metrics": "array, 统计指标数组, 必填",
  "filters": "object, 筛选条件, 可选",
  "group_by": "string, 分组方式, 可选",
  "period": "string, 统计周期, 可选"
}
```

**业务逻辑:**
1. 解析自定义统计要求
2. 应用筛选条件
3. 按指定方式分组统计
4. 返回自定义统计结果

---

### 12. 导出统计报告

**接口描述:** 导出统计报告

**请求方式:** `POST`

**请求路径:** `/statistics/export`

**是否需要认证:** 是

**请求参数:**
```json
{
  "report_type": "string, 报告类型(summary/detailed/custom), 必填",
  "format": "string, 导出格式(pdf/excel/csv), 必填",
  "period": "string, 统计周期, 可选",
  "include_charts": "bool, 是否包含图表, 可选, 默认true"
}
```

**业务逻辑:**
1. 生成统计报告
2. 包含图表和数据
3. 按指定格式导出
4. 返回下载链接

---

### 13. 获取数据洞察

**接口描述:** 获取数据洞察和建议

**请求方式:** `GET`

**请求路径:** `/statistics/insights`

**是否需要认证:** 是

**请求参数:** 无

**业务逻辑:**
1. 分析用户设备数据
2. 识别使用模式
3. 提供优化建议
4. 返回数据洞察报告

---

### 14. 获取对比分析

**接口描述:** 获取设备对比分析数据

**请求方式:** `POST`

**请求路径:** `/statistics/comparison`

**是否需要认证:** 是

**请求参数:**
```json
{
  "device_ids": "array, 设备ID数组, 必填",
  "metrics": "array, 对比指标数组, 必填"
}
```

**业务逻辑:**
1. 获取指定设备数据
2. 按指标进行对比分析
3. 计算差异和相似性
4. 返回对比分析结果 